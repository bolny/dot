#!/bin/sh

echo "### Linking base dotfiles ###"
ln -sf "${PWD}/.bashrc" "${HOME}/.bashrc"
ln -sf "${PWD}/.profile" "${HOME}/.profile"
ln -sf "${PWD}/.tmux.conf" "${HOME}/.tmux.conf"
ln -sf "${PWD}/.tmux.conf.local" "${HOME}/.tmux.conf.local"
ln -sf "${PWD}/.vimrc" "${HOME}/.vimrc"
ln -sf "${PWD}/.zprofile" "${HOME}/.zprofile"
ln -sf "${PWD}/.zshrc" "${HOME}/.zshrc"
ln -sf "${PWD}/.lynx.cfg" "${HOME}/.lynx.cfg"

rm -rf "${HOME}/.bin"
ln -sf "${PWD}/bin" "${HOME}/.bin"

# Install vim-plug
if [ -f "~/.vim/autoload/plug.vim" ]
then
  echo "### Installing vim-plug ###"
  curl -fLo ~/.vim/autoload/plug.vim --create-dirs \
    https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
else
  echo "### vim-plug detected. Skipping install. ###"
fi

if [ "$1" != "" ]
then
  sh "./machines/$1/setup"
fi
